include_directories("${PROJECT_SOURCE_DIR}/gtkmm/gtk")
include_directories("${PROJECT_SOURCE_DIR}/gtkmm/MSVC_Net2008/gtkmm")
include_directories("${PROJECT_SOURCE_DIR}/gtk-bundle/include/gtk-2.0")
include_directories("${PROJECT_SOURCE_DIR}/gtk-bundle/lib/gtk-2.0/include")

file(
	GLOB
	GTKMM_HEADER
	gtkmm/gtk/*.h
	gtkmm/gtk/gtkmm/*.h
	gtkmm/gtk/gtkmm/private/*.h
	gtkmm/MSVC_Net2008/gtkmm/gtkmmconfig.h 
)

set(GTKMM_SRC "gtkmm/gtk/gtkmm/aboutdialog.cc;gtkmm/gtk/gtkmm/accelgroup.cc;gtkmm/gtk/gtkmm/accelkey.cc;gtkmm/gtk/gtkmm/accellabel.cc;gtkmm/gtk/gtkmm/accelmap.cc;gtkmm/gtk/gtkmm/action.cc;gtkmm/gtk/gtkmm/actiongroup.cc;gtkmm/gtk/gtkmm/activatable.cc;gtkmm/gtk/gtkmm/adjustment.cc;gtkmm/gtk/gtkmm/alignment.cc;gtkmm/gtk/gtkmm/arrow.cc;gtkmm/gtk/gtkmm/aspectframe.cc;gtkmm/gtk/gtkmm/assistant.cc;gtkmm/gtk/gtkmm/bin.cc;gtkmm/gtk/gtkmm/box.cc;gtkmm/gtk/gtkmm/builder.cc;gtkmm/gtk/gtkmm/button.cc;gtkmm/gtk/gtkmm/buttonbox.cc;gtkmm/gtk/gtkmm/calendar.cc;gtkmm/gtk/gtkmm/celleditable.cc;gtkmm/gtk/gtkmm/celllayout.cc;gtkmm/gtk/gtkmm/cellrenderer.cc;gtkmm/gtk/gtkmm/cellrenderer_generation.cc;gtkmm/gtk/gtkmm/cellrendereraccel.cc;gtkmm/gtk/gtkmm/cellrenderercombo.cc;gtkmm/gtk/gtkmm/cellrendererpixbuf.cc;gtkmm/gtk/gtkmm/cellrendererprogress.cc;gtkmm/gtk/gtkmm/cellrendererspin.cc;gtkmm/gtk/gtkmm/cellrendererspinner.cc;gtkmm/gtk/gtkmm/cellrenderertext.cc;gtkmm/gtk/gtkmm/cellrenderertoggle.cc;gtkmm/gtk/gtkmm/cellview.cc;gtkmm/gtk/gtkmm/checkbutton.cc;gtkmm/gtk/gtkmm/checkmenuitem.cc;gtkmm/gtk/gtkmm/clipboard.cc;gtkmm/gtk/gtkmm/colorbutton.cc;gtkmm/gtk/gtkmm/colorselection.cc;gtkmm/gtk/gtkmm/combo.cc;gtkmm/gtk/gtkmm/combobox.cc;gtkmm/gtk/gtkmm/comboboxentry.cc;gtkmm/gtk/gtkmm/comboboxentrytext.cc;gtkmm/gtk/gtkmm/comboboxtext.cc;gtkmm/gtk/gtkmm/container.cc;gtkmm/gtk/gtkmm/curve.cc;gtkmm/gtk/gtkmm/dialog.cc;gtkmm/gtk/gtkmm/drawingarea.cc;gtkmm/gtk/gtkmm/editable.cc;gtkmm/gtk/gtkmm/entry.cc;gtkmm/gtk/gtkmm/entrybuffer.cc;gtkmm/gtk/gtkmm/entrycompletion.cc;gtkmm/gtk/gtkmm/enums.cc;gtkmm/gtk/gtkmm/eventbox.cc;gtkmm/gtk/gtkmm/expander.cc;gtkmm/gtk/gtkmm/filechooser.cc;gtkmm/gtk/gtkmm/filechooserbutton.cc;gtkmm/gtk/gtkmm/filechooserdialog.cc;gtkmm/gtk/gtkmm/filechooserwidget.cc;gtkmm/gtk/gtkmm/filefilter.cc;gtkmm/gtk/gtkmm/fileselection.cc;gtkmm/gtk/gtkmm/fixed.cc;gtkmm/gtk/gtkmm/fontbutton.cc;gtkmm/gtk/gtkmm/fontselection.cc;gtkmm/gtk/gtkmm/frame.cc;gtkmm/gtk/gtkmm/handlebox.cc;gtkmm/gtk/gtkmm/iconfactory.cc;gtkmm/gtk/gtkmm/iconinfo.cc;gtkmm/gtk/gtkmm/iconset.cc;gtkmm/gtk/gtkmm/iconsource.cc;gtkmm/gtk/gtkmm/icontheme.cc;gtkmm/gtk/gtkmm/iconview.cc;gtkmm/gtk/gtkmm/image.cc;gtkmm/gtk/gtkmm/imagemenuitem.cc;gtkmm/gtk/gtkmm/infobar.cc;gtkmm/gtk/gtkmm/inputdialog.cc;gtkmm/gtk/gtkmm/invisible.cc;gtkmm/gtk/gtkmm/item.cc;gtkmm/gtk/gtkmm/label.cc;gtkmm/gtk/gtkmm/layout.cc;gtkmm/gtk/gtkmm/linkbutton.cc;gtkmm/gtk/gtkmm/liststore.cc;gtkmm/gtk/gtkmm/listviewtext.cc;gtkmm/gtk/gtkmm/main.cc;gtkmm/gtk/gtkmm/menu.cc;gtkmm/gtk/gtkmm/menu_elems.cc;gtkmm/gtk/gtkmm/menubar.cc;gtkmm/gtk/gtkmm/menuitem.cc;gtkmm/gtk/gtkmm/menushell.cc;gtkmm/gtk/gtkmm/menutoolbutton.cc;gtkmm/gtk/gtkmm/messagedialog.cc;gtkmm/gtk/gtkmm/misc.cc;gtkmm/gtk/gtkmm/notebook.cc;gtkmm/gtk/gtkmm/object.cc;gtkmm/gtk/gtkmm/offscreenwindow.cc;gtkmm/gtk/gtkmm/optionmenu.cc;gtkmm/gtk/gtkmm/orientable.cc;gtkmm/gtk/gtkmm/pagesetup.cc;gtkmm/gtk/gtkmm/paned.cc;gtkmm/gtk/gtkmm/papersize.cc;gtkmm/gtk/gtkmm/plug.cc;gtkmm/gtk/gtkmm/printcontext.cc;gtkmm/gtk/gtkmm/printoperation.cc;gtkmm/gtk/gtkmm/printoperationpreview.cc;gtkmm/gtk/gtkmm/printsettings.cc;gtkmm/gtk/gtkmm/progressbar.cc;gtkmm/gtk/gtkmm/radioaction.cc;gtkmm/gtk/gtkmm/radiobutton.cc;gtkmm/gtk/gtkmm/radiobuttongroup.cc;gtkmm/gtk/gtkmm/radiomenuitem.cc;gtkmm/gtk/gtkmm/radiotoolbutton.cc;gtkmm/gtk/gtkmm/range.cc;gtkmm/gtk/gtkmm/rc.cc;gtkmm/gtk/gtkmm/recentaction.cc;gtkmm/gtk/gtkmm/recentchooser.cc;gtkmm/gtk/gtkmm/recentchooserdialog.cc;gtkmm/gtk/gtkmm/recentchoosermenu.cc;gtkmm/gtk/gtkmm/recentchooserwidget.cc;gtkmm/gtk/gtkmm/recentfilter.cc;gtkmm/gtk/gtkmm/recentinfo.cc;gtkmm/gtk/gtkmm/recentmanager.cc;gtkmm/gtk/gtkmm/ruler.cc;gtkmm/gtk/gtkmm/scale.cc;gtkmm/gtk/gtkmm/scalebutton.cc;gtkmm/gtk/gtkmm/scrollbar.cc;gtkmm/gtk/gtkmm/scrolledwindow.cc;gtkmm/gtk/gtkmm/selectiondata.cc;gtkmm/gtk/gtkmm/selectiondata_private.cc;gtkmm/gtk/gtkmm/separator.cc;gtkmm/gtk/gtkmm/separatormenuitem.cc;gtkmm/gtk/gtkmm/separatortoolitem.cc;gtkmm/gtk/gtkmm/settings.cc;gtkmm/gtk/gtkmm/sizegroup.cc;gtkmm/gtk/gtkmm/socket.cc;gtkmm/gtk/gtkmm/spinbutton.cc;gtkmm/gtk/gtkmm/spinner.cc;gtkmm/gtk/gtkmm/statusbar.cc;gtkmm/gtk/gtkmm/statusicon.cc;gtkmm/gtk/gtkmm/stock.cc;gtkmm/gtk/gtkmm/stockid.cc;gtkmm/gtk/gtkmm/stockitem.cc;gtkmm/gtk/gtkmm/style.cc;gtkmm/gtk/gtkmm/table.cc;gtkmm/gtk/gtkmm/targetentry.cc;gtkmm/gtk/gtkmm/targetlist.cc;gtkmm/gtk/gtkmm/tearoffmenuitem.cc;gtkmm/gtk/gtkmm/textattributes.cc;gtkmm/gtk/gtkmm/textbuffer.cc;gtkmm/gtk/gtkmm/textchildanchor.cc;gtkmm/gtk/gtkmm/textiter.cc;gtkmm/gtk/gtkmm/textmark.cc;gtkmm/gtk/gtkmm/texttag.cc;gtkmm/gtk/gtkmm/texttagtable.cc;gtkmm/gtk/gtkmm/textview.cc;gtkmm/gtk/gtkmm/toggleaction.cc;gtkmm/gtk/gtkmm/togglebutton.cc;gtkmm/gtk/gtkmm/toggletoolbutton.cc;gtkmm/gtk/gtkmm/toolbar.cc;gtkmm/gtk/gtkmm/toolbutton.cc;gtkmm/gtk/gtkmm/toolitem.cc;gtkmm/gtk/gtkmm/toolitemgroup.cc;gtkmm/gtk/gtkmm/toolpalette.cc;gtkmm/gtk/gtkmm/toolshell.cc;gtkmm/gtk/gtkmm/tooltip.cc;gtkmm/gtk/gtkmm/tooltips.cc;gtkmm/gtk/gtkmm/treedragdest.cc;gtkmm/gtk/gtkmm/treedragsource.cc;gtkmm/gtk/gtkmm/treeiter.cc;gtkmm/gtk/gtkmm/treemodel.cc;gtkmm/gtk/gtkmm/treemodelcolumn.cc;gtkmm/gtk/gtkmm/treemodelfilter.cc;gtkmm/gtk/gtkmm/treemodelsort.cc;gtkmm/gtk/gtkmm/treepath.cc;gtkmm/gtk/gtkmm/treerowreference.cc;gtkmm/gtk/gtkmm/treeselection.cc;gtkmm/gtk/gtkmm/treesortable.cc;gtkmm/gtk/gtkmm/treestore.cc;gtkmm/gtk/gtkmm/treeview.cc;gtkmm/gtk/gtkmm/treeview_private.cc;gtkmm/gtk/gtkmm/treeviewcolumn.cc;gtkmm/gtk/gtkmm/uimanager.cc;gtkmm/gtk/gtkmm/viewport.cc;gtkmm/gtk/gtkmm/volumebutton.cc;gtkmm/gtk/gtkmm/widget.cc;gtkmm/gtk/gtkmm/window.cc;gtkmm/gtk/gtkmm/wrap_init.cc")

add_library(gtkmm SHARED ${GTKMM_SRC} ${GTKMM_HEADER})
target_compile_definitions(gtkmm PUBLIC WIN32 GTKMM_BUILD _USRDLL _WINDLL _WINDOWS)
add_custom_command(TARGET gtkmm PRE_LINK COMMAND gendef 
	${CMAKE_CURRENT_BINARY_DIR}/gtkmm.def 
	$<TARGET_FILE_NAME:gtkmm> 
	${CMAKE_CURRENT_BINARY_DIR}/$<$<BOOL:${CMAKE_BUILD_TYPE}>:${CMAKE_FILES_DIRECTORY}>/gtkmm.dir/${CMAKE_CFG_INTDIR}/$<$<BOOL:${CMAKE_BUILD_TYPE}>:gtkmm/gtk/gtkmm/>*.obj)
set_target_properties(gtkmm PROPERTIES LINK_FLAGS "/DEF:\"gtkmm.def\"")
target_link_libraries(gtkmm sigc glibmm giomm cairomm pangomm atkmm gdkmm glib-2.0 gobject-2.0 gdk-win32-2.0 gtk-win32-2.0)

# install
install(TARGETS gtkmm 
	RUNTIME DESTINATION "${RUNTIME_INSTALL_PATH}"
	LIBRARY DESTINATION "${LIBRARY_INSTALL_PATH}"
	ARCHIVE DESTINATION "${ARCHIVE_INSTALL_PATH}")
install(FILES gtkmm/gtk/gtkmm.h DESTINATION "include/gtkmm-2.4")
install(DIRECTORY gtkmm/gtk/gtkmm DESTINATION "include/gtkmm-2.4" FILES_MATCHING PATTERN "*.h" PATTERN "Pax*" EXCLUDE PATTERN "private*" EXCLUDE)
install(FILES gtkmm/MSVC_Net2008/gtkmm/gtkmmconfig.h DESTINATION "include/gtkmm-2.4")
